<!DOCTYPE html>
<html lang="tr">
<head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9543285626215148"
     crossorigin="anonymous"></script>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PeÅŸin mi, Vadeli mi? | taksitmi.com</title>
<meta name="description" content="PeÅŸin mi vadeli mi? Ara Ã¶demeler ve mevduat getirisiyle NPV bazlÄ± kÄ±yaslama yapÄ±n." />
  <!-- âœ… Google Analytics 4 (GA4) kodun -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FYXPKBCT1S"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-FYXPKBCT1S');
  </script>

<style>
  :root{
    --bg:#faf7ff; --card:#ffffff; --ink:#2b2e3a; --muted:#5f6b7a;
    --brand:#6d28d9; --brand-weak:#ede9fe; --accent:#f59e0b;
    --line:#e5e7eb; --ok:#059669; --danger:#dc2626;
    --green-weak:#ecfdf5; --green-line:#a7f3d0;
    --purple-weak:#f5f3ff; --purple-line:#ddd6fe;
  }
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--ink);
    font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}

  /* ---- Navbar ---- */
  header{background:#fff;border-bottom:1px solid var(--line);position:sticky;top:0;z-index:50;}
  .nav{display:flex;align-items:center;justify-content:space-between;height:80px;max-width:1200px;margin:0 auto;padding:0 20px;}
  .nav-left img{height:180px;max-width:400px;object-fit:contain;}
  @media(max-width:700px){.nav-left img{height:60px;max-width:220px;}}
  .nav-links{display:flex;gap:24px;align-items:center;font-weight:600}
  .nav-links a{color:var(--ink);transition:color .2s}
  .nav-links a:hover{color:var(--brand)}
  .nav-links a.active{color:var(--brand);text-decoration:underline;text-underline-offset:6px}

  /* ---- Genel Layout ---- */
  .wrap{max-width:1200px;margin:28px auto;padding:0 16px}
  .grid{display:grid;grid-template-columns:1.15fr .85fr;gap:18px}
  @media (max-width:1060px){.grid{grid-template-columns:1fr}}
  .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:16px;box-shadow:0 1px 0 rgba(0,0,0,.03)}
  .card h2{margin:0 0 12px 0;font-size:22px;color:#1f2937}

  /* ---- Logo + Motto ---- */
  .site-header {display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;margin:30px 0 20px;}
  .site-logo img {max-height:200px;margin-bottom:12px;}
  .site-motto {font-size:22px;font-weight:700;background:linear-gradient(90deg,#6d28d9,#f59e0b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
  @media (max-width:600px){.site-logo img{max-height:120px;} .site-motto{font-size:18px;}}

  /* ---- DÃ¶viz Ticker ---- */
  .ticker {display:flex;gap:20px;justify-content:center;flex-wrap:wrap;padding:10px;margin:20px 0;
    background:#f5f3ff;border:1px solid #ddd6fe;border-radius:10px;}
  .ticker .item {font-size:15px;font-weight:600;display:flex;gap:6px;align-items:center;}
  .value {transition:color 0.3s ease, transform 0.3s ease;}
  .up{color:var(--ok);transform:scale(1.1);}
  .down{color:var(--danger);transform:scale(1.1);}

  /* ---- Sol panel ---- */
  .left-panel{display:grid;grid-template-columns:1fr;gap:16px}
  .section-card{border:1px solid var(--line);border-radius:12px;padding:12px}
  .section-title{margin:0 0 8px 0;font-weight:800}
  .section-card.pesin{background:var(--green-weak);border-color:var(--green-line)}
  .section-card.vadeli{background:var(--purple-weak);border-color:var(--purple-line)}
  .form-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px 14px}
  @media (max-width:640px){.form-grid{grid-template-columns:1fr}}
  .form-label{align-self:center;min-height:36px;line-height:1.2;font-size:14px;color:#374151}
  .form-control{width:100%;min-height:36px;padding:8px 10px;border:1px solid #d1d5db;border-radius:8px;background:#fff}
  .inline-actions{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
  .btn{border:1px solid var(--line);background:#fff;padding:8px 12px;border-radius:10px;cursor:pointer}
  .btn.primary{background:var(--brand);color:#fff;border-color:transparent}
  .btn.danger{background:#fff;border-color:#fecaca;color:#b91c1c}
  .muted{color:var(--muted)}

  /* ---- SaÄŸ panel sonuÃ§ kutularÄ± ---- */
  .result-box{border-radius:12px;padding:16px;margin-bottom:16px;border:1px solid var(--line);box-shadow:0 2px 4px rgba(0,0,0,0.04)}
  .result-box h3{margin:0 0 8px;font-size:16px;color:#374151}
  .highlight{font-size:18px;font-weight:700}
  .negative{color:var(--danger)} .positive{color:var(--ok)}
  .green-box{background:var(--green-weak);border-color:var(--green-line)}
  .purple-box{background:var(--purple-weak);border-color:var(--purple-line)}
  .neutral-box{background:#fff;border-color:var(--line)}
  .prefer{font-weight:800;font-size:16px;margin-top:6px}
  .prefer.green{color:var(--ok)}
  .prefer.purple{color:#6d28d9}
  .prefer.neutral{color:#374151}

  /* ---- Footer (tam geniÅŸlik versiyonu) ---- */
/* ---- Footer (tam geniÅŸlik versiyonu) ---- */
footer {
  width: 100%;
  background: linear-gradient(90deg, #f5f3ff, #fff7ed);
  border-top: 1px solid var(--line);
  padding: 28px 0;
  margin-top: 80px;
  text-align: center;
  box-shadow: 0 -1px 3px rgba(0,0,0,0.04);
}


footer .footer-inner {
  width: 100%;
  max-width: none;
  margin: 0;
  padding: 0 16px;
  font-size: 14px;
  color: var(--muted);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

footer .footer-inner a {
  color: var(--brand);
  font-weight: 600;
  text-decoration: none;
}

footer .footer-inner a:hover {
  text-decoration: underline;
}
  /* ---- HÄ±zlÄ± Hesaplama KartÄ± (3 kutu) ---- */
  .quick-card{
    margin-bottom:18px;
    display:flex;
    flex-direction:column;
    gap:12px;
  }
  .quick-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:8px;
  }
  .quick-header h2{
    margin:0;
    font-size:18px;
  }
  .quick-tag{
    font-size:12px;
    padding:4px 8px;
    border-radius:999px;
    background:var(--brand-weak);
    color:var(--brand);
    font-weight:600;
    white-space:nowrap;
  }
  .quick-grid{
    display:grid;
    grid-template-columns:repeat(3, minmax(0,1fr));
    gap:10px;
  }
  @media (max-width:800px){
    .quick-grid{
      grid-template-columns:1fr;
    }
  }
  .quick-item{
    border-radius:12px;
    border:1px solid var(--line);
    padding:10px 12px;
    background:#ffffff;
    display:flex;
    flex-direction:column;
    gap:6px;


  }
  /* PeÅŸin kutusu: yeÅŸil */
.quick-green{
  background:#ecfdf5 !important;
  border-color:#a7f3d0 !important;
}

/* Taksit kutularÄ±: mor */
.quick-purple{
  background:#f5f3ff !important;
  border-color:#ddd6fe !important;
}

  .quick-label{
    font-size:13px;
    font-weight:600;
    color:#374151;
  }
  .quick-hint{
    font-size:11px;
    color:var(--muted);
  }
  .quick-input{
    margin-top:2px;
    width:100%;
    border-radius:8px;
    border:1px solid #d1d5db;
    padding:8px 10px;
    font-size:14px;
  }
  .quick-row-bottom{
    display:flex;
    justify-content:flex-end;
  }
  .quick-btn{
    margin-top:4px;
  }

/* bÃ¼yÃ¼k sonuÃ§ kutusu*/
.summary-card{
  margin: -5px 0 20px 0;
  padding: 18px 20px;
  border-radius: 14px;
  background: #ffffff;
  border: 1px solid var(--line);
  box-shadow: 0 3px 10px rgba(0,0,0,0.04);
  text-align: center;
}

.summary-title{
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 8px;
  color: #111827;
}

.summary-value{
  font-size: 32px;
  font-weight: 800;
  margin-bottom: 6px;
}

.summary-desc{
  font-size: 14px;
  color: #4b5563;
}

/* PeÅŸin avantajlÄ± */
.summary-green{
  color: #059669; /* yeÅŸil */
}

/* Vadeli avantajlÄ± */
.summary-purple{
  color: #7c3aed; /* mor */
}

/* EÅŸit */
.summary-gray{
  color: #6b7280;
}

/* AÃ§Ä±klama kutusu */
.feature-intro{
  margin: 14px 0 18px;
  padding: 14px 18px;
  border-radius: 14px;
  background: #f8f5ff;
  border: 1px solid #e4d9ff;
  display: flex;
  align-items: center;
  gap: 12px;
  animation: fadeIn 0.4s ease;
}

.feature-icon{
  font-size: 22px;
  color: var(--brand);
}

.feature-text{
  font-size: 15px;
  color: #4b4b4b;
  line-height: 1.35;
}

.feature-text strong{
  color: var(--brand);
}

/* KÃ¼Ã§Ã¼k ekranlarda uyum */
@media (max-width: 600px){
  .feature-intro{
    padding: 12px 14px;
  }
  .feature-text{
    font-size: 14px;
  }
}

/* Hafif fade animasyonu */
@keyframes fadeIn{
  from{ opacity:0; transform: translateY(5px); }
  to{ opacity:1; transform: translateY(0); }
}


/* Sadece karÅŸÄ±laÅŸtÄ±rma ve Ã¶zet iÃ§in parÄ±ldama efekti */
.result-flash {
  animation: flashBox 0.6s ease-out;
}

@keyframes flashBox {
  0%   { background-color: #fff3bf; }
  100% { background-color: transparent; }
}

</style>
</head>
<body>

<!-- âœ… Navbar -->
 <div id="site-header"></div>

<div class="wrap">
  <!-- Logo + Motto -->
<div class="site-header">
  <div class="site-motto">En kÃ¢rlÄ± Ã¶deme yÃ¶ntemini seÃ§menin en kolay yolu.</div>
</div>

       <!-- DÃ¶viz Ticker -->
  <div class="ticker">
    <div class="item">ğŸ’µ Dolar: <span class="value" id="usd">--</span></div>
    <div class="item">ğŸ’¶ Euro: <span class="value" id="eur">--</span></div>
    <div class="item">ğŸ’· Sterlin: <span class="value" id="gbp">--</span></div>
    <div class="item">ğŸ¥‡ Gram AltÄ±n: <span class="value" id="ga">--</span></div>
  </div>

  <!-- AÃ§Ä±klama Kutusu -->
<div class="feature-intro">
  <span class="feature-icon">âš¡</span>
  <div class="feature-text">
    PeÅŸin mi taksit mi? <strong>KarÅŸÄ±laÅŸtÄ±r ve en avantajlÄ± seÃ§eneÄŸi anÄ±nda gÃ¶r.</strong>
  </div>
</div>


  <!-- HÄ±zlÄ± Hesaplama: 3 kutu -->
  <div class="card quick-card">
    <div class="quick-header">
      <h2>HÄ±zlÄ± hesaplama</h2>
      <span class="quick-tag">Sadece 3 alan doldur</span>
    </div>
    <div class="quick-grid">
      <div class="quick-item quick-green">

        <div class="quick-label">PeÅŸin Fiyat (TL)</div>
        <input
          id="q-pesinFiyat"
          class="quick-input"
          inputmode="numeric"
          placeholder="Ã–rn: 100000"
        />

        <div class="quick-hint">ÃœrÃ¼nÃ¼n peÅŸin fiyatÄ±</div>
      </div>
      <div class="quick-item quick-purple">

        <div class="quick-label">Taksit SayÄ±sÄ± (ay)</div>
        <input
          id="q-taksitSayi"
          class="quick-input"
          type="number"
          min="1"
          step="1"
          placeholder="Ã–rn: 12"
        />
        <div class="quick-hint">Toplam taksit adedi</div>
      </div>
      <div class="quick-item quick-purple">

        <div class="quick-label">AylÄ±k Taksit (TL)</div>
<input
  id="q-aylikTaksit"
  class="quick-input"
  inputmode="numeric"
  placeholder="Ã–rn: 9500"
/>
        <div class="quick-hint">Her ay Ã¶deyeceÄŸin tutar</div>
      </div>
    </div>
    <div class="quick-row-bottom">
      <button class="btn primary quick-btn" id="quickCalcBtn">
        Hemen Hesapla
      </button>
    </div>
  </div>
            <!-- Ã–zet SonuÃ§ Kutusu -->
      <div class="card summary-card" id="summaryBox">
        <div class="summary-title">SonuÃ§</div>
        <div class="summary-value" id="summaryValue">--</div>
        <div class="summary-desc" id="summaryDesc">Hesaplama iÃ§in deÄŸer giriniz.</div>
      </div>

    <!-- Girdiler / SonuÃ§lar / Kampanyalar -->
    <div class="grid">

    <!-- Girdiler / SonuÃ§lar / Kampanyalar -->
    <div class="grid">
      <!-- Sol Kart -->
      <div class="card" id="sol-kart">
        <h2>Girdiler</h2>
        <div class="left-panel">

          <div class="section-card pesin">
            <h3 class="section-title">PeÅŸin Ã–deme Bilgileri</h3>
            <div class="form-grid">
              <label class="form-label" for="pesinFiyat">PeÅŸin Fiyat (TL)</label>
              <input class="form-control money" id="pesinFiyat" inputmode="numeric" value="100.000">

              <label class="form-label" for="pesinIndirim">PeÅŸin Ä°ndirimi (%)</label>
              <input class="form-control percent" id="pesinIndirim" type="number" value="0" step="0.1">
            </div>
          </div>

          <div class="section-card vadeli">
            <h3 class="section-title">Vadeli Ã–deme Bilgileri</h3>
            <div class="form-grid">
              <label class="form-label" for="pesinat">PeÅŸinat (TL)</label>
              <input class="form-control money" id="pesinat" inputmode="numeric" value="0">

              <label class="form-label" for="taksitSayi">Taksit SayÄ±sÄ± (ay)</label>
              <input class="form-control" id="taksitSayi" type="number" value="12" min="1" step="1">

              <label class="form-label" for="aylikTaksit">AylÄ±k Taksit (TL)</label>
              <input class="form-control money" id="aylikTaksit" inputmode="numeric" value="9.500">

              <label class="form-label" for="masraf">Masraflar (TL)</label>
              <input class="form-control money" id="masraf" inputmode="numeric" value="0">

              <label class="form-label" for="firsatGetirisi">AylÄ±k Mevduat Getirisi (%)</label>
              <input class="form-control percent" id="firsatGetirisi" type="number" value="3" step="0.1">
            </div>
          </div>

          <div class="section-card">
            <h3 class="section-title">Ara Ã–demeler</h3>
            <div class="form-grid">
              <label class="form-label" for="araAy">Ay</label>
              <input class="form-control" id="araAy" type="number" value="1" min="1">

              <label class="form-label" for="araTutar">Tutar (TL)</label>
              <input class="form-control money" id="araTutar" inputmode="numeric" value="0">

              <div class="full inline-actions">
                <button class="btn" id="araEkle">+ Ara Ã–deme Ekle</button>
                <button class="btn ghost" id="araTemizle">Ara Ã–demeleri Temizle</button>
              </div>
            </div>
            <div class="list-ara" id="araLista"></div>
          </div>

          <div class="inline-actions">
            <button class="btn primary" id="hesaplaBtn">Hesapla</button>
            <button class="btn" id="sifirlaBtn">SÄ±fÄ±rla</button>
          </div>

        </div>
      </div>

      <!-- SaÄŸ Kart -->
      <div class="card" id="sag-kart">
        <h2>SonuÃ§lar</h2>

        <div id="boxPesin" class="result-box green-box">
          <h3>PeÅŸin Ã–deme</h3>
          <p>Net PeÅŸin: <span id="pesinSonuc" class="highlight">â€“</span></p>
        </div>

        <div id="boxVadeli" class="result-box purple-box">
          <h3>Vadeli Ã–deme</h3>
          <p>Toplam Vadeli: <span id="vadeliSonuc" class="highlight">â€“</span></p>
          <p title="Taksitler ve ara Ã¶demelerin, aylÄ±k mevduat getirisi oranÄ±yla bugÃ¼ne indirgenmiÅŸ toplamÄ±.">
            Vadeli Ã–demenin BugÃ¼nkÃ¼ DeÄŸeri (NPV): <span id="vadeliNPV" class="highlight">â€“</span>
          </p>
        </div>

        <div id="boxKars" class="result-box neutral-box">
          <h3>KarÅŸÄ±laÅŸtÄ±rma</h3>
          <p id="aciklama">â€“</p>
          <div id="tercihLine" class="prefer neutral">Tercih: â€“</div>
        </div>
      </div>
       </div> <!-- âœ… grid burada kapanmalÄ± -->
<!-- Kampanyalar (yÃ¶nlendirmeli sade kutu) -->
<div class="card camps-card" id="camps" style="text-align:center; padding:40px 20px;">
  <h2 style="font-size:22px; color:var(--brand); margin-bottom:16px;">Banka KampanyalarÄ±</h2>
  <p style="font-size:16px; color:var(--muted); margin-bottom:30px;">
    GÃ¼ncel kart ve mevduat kampanyalarÄ±nÄ± gÃ¶rÃ¼ntÃ¼lemek iÃ§in kampanyalar sayfasÄ±na gidin.
  </p>
  <a href="kampanyalar.html"
     style="display:inline-block; background:linear-gradient(90deg,var(--brand),var(--accent)); color:#fff;
     padding:12px 28px; border-radius:10px; font-weight:600; text-decoration:none; transition:opacity .2s;">
     ğŸ” KampanyalarÄ± GÃ¶rÃ¼ntÃ¼le
  </a>
</div>
</div> <!-- wrap kapatÄ±ldÄ± -->


<script>
document.addEventListener('DOMContentLoaded',()=>{

  /* ========= FormatlayÄ±cÄ±lar ========= */
  const fmt0 = new Intl.NumberFormat('tr-TR', {maximumFractionDigits:0});
  const fmt2 = new Intl.NumberFormat('tr-TR', {minimumFractionDigits:2, maximumFractionDigits:2});
  const tl = n => fmt2.format(n) + ' â‚º';
  const pct = n => fmt2.format(n) + ' %';

  function parseMoney(str){
    if(str==null) return 0;
    str=String(str).replace(/\./g,'').replace(/,/g,'.').replace(/[^\d.]/g,'');
    const v=parseFloat(str);
    return isNaN(v)?0:v;
  }
function displayMoneyInput(el){
  const val = parseMoney(el.value);
  if (!val) {
    el.value = '';
  } else {
    // 2 hane ondalÄ±klÄ±, tr-TR format
    el.value = fmt2.format(val);
  }
}
  function getMoney(id){ return parseMoney(document.getElementById(id).value); }

  /* ========= Elemanlar ========= */
  const el = {
    pesinFiyat: document.getElementById('pesinFiyat'),
    pesinIndirim: document.getElementById('pesinIndirim'),
    pesinat: document.getElementById('pesinat'),
    taksitSayi: document.getElementById('taksitSayi'),
    aylikTaksit: document.getElementById('aylikTaksit'),
    masraf: document.getElementById('masraf'),
    firsatGetirisi: document.getElementById('firsatGetirisi'),
    araAy: document.getElementById('araAy'),
    araTutar: document.getElementById('araTutar'),
    araLista: document.getElementById('araLista'),
    hesaplaBtn: document.getElementById('hesaplaBtn'),
    sifirlaBtn: document.getElementById('sifirlaBtn'),
    araEkle: document.getElementById('araEkle'),
    araTemizle: document.getElementById('araTemizle'),
    pesinSonuc: document.getElementById('pesinSonuc'),
    vadeliSonuc: document.getElementById('vadeliSonuc'),
    vadeliNPV: document.getElementById('vadeliNPV'),
    aciklama: document.getElementById('aciklama'),
    tercih: document.getElementById('tercihLine')
  };

  /* ========= Para alanlarÄ±nÄ± formatla + otomatik hesap ========= */
  document.querySelectorAll('.money').forEach(elm=>{
    displayMoneyInput(elm);
    elm.addEventListener('input', ()=>{
      displayMoneyInput(elm);
      hesapla();
    });
    elm.addEventListener('blur', ()=>displayMoneyInput(elm));
  });
  document.getElementById('sol-kart')?.addEventListener('input',e=>{
    if(!e.target.classList.contains('money')) hesapla();
  });

  /* ========= Ara Ã¶demeler ========= */
  const ara=[];
  function renderAra(){
    const host=el.araLista;
    host.innerHTML='';
    if(ara.length===0){
      host.innerHTML='<div class="muted">KayÄ±tlÄ± ara Ã¶deme yok.</div>';
      return;
    }
    ara.sort((a,b)=>a.ay-b.ay);
    ara.forEach((x,i)=>{
      const row=document.createElement('div');
      row.className='ara-item';
      row.innerHTML=`<div><b>${x.ay}. ay</b> â€“ ${fmt0.format(x.tutar)} â‚º</div>
                     <button class="btn danger" data-i="${i}">Sil</button>`;
      host.appendChild(row);
    });
    host.querySelectorAll('button[data-i]').forEach(btn=>{
      btn.onclick=()=>{ ara.splice(+btn.dataset.i,1); renderAra(); hesapla(); };
    });
  }
  el.araEkle.addEventListener('click',()=>{
    const ay=+el.araAy.value||1;
    const tutar=getMoney('araTutar');
    if(tutar>0){ ara.push({ay,tutar}); el.araTutar.value=''; renderAra(); hesapla(); }
  });
  el.araTemizle.addEventListener('click',()=>{ ara.length=0; renderAra(); hesapla(); });

  /* ========= Hesapla / SÄ±fÄ±rla ========= */
  el.hesaplaBtn.addEventListener('click',hesapla);
  el.sifirlaBtn.addEventListener('click',()=>{
    el.pesinFiyat.value='100.000';
    el.pesinIndirim.value='0';
    el.pesinat.value='0';
    el.taksitSayi.value='12';
    el.aylikTaksit.value='9.500';
    el.masraf.value='0';
    el.firsatGetirisi.value='3';
    ara.length=0; renderAra(); hesapla();
  });

  /* ========= NPV Hesaplama ========= */
  function hesapla(){
    const pesinFiyat=getMoney('pesinFiyat');
    const pesinInd=(+el.pesinIndirim.value||0)/100;
    const pesinat=getMoney('pesinat');
    const n=Math.max(1, Math.floor(+el.taksitSayi.value||1));
    const taksit=getMoney('aylikTaksit');
    const masraf=getMoney('masraf');
    const aylikGetiri=(+el.firsatGetirisi.value||0)/100;

    // PeÅŸin
    const netPesin=pesinFiyat*(1-pesinInd);
    el.pesinSonuc.textContent=tl(netPesin);

    // Vadeli toplam (nominal)
    let toplamVadeli=pesinat+masraf+(n*taksit);
    ara.forEach(x=> toplamVadeli+=x.tutar);
    el.vadeliSonuc.textContent=tl(toplamVadeli);

    // Vadeli NPV (bugÃ¼nkÃ¼ deÄŸer)
    let pvVadeli=pesinat+masraf;
    for(let t=1;t<=n;t++) pvVadeli+=taksit/Math.pow(1+aylikGetiri,t);
    for(const a of ara){ if(a.ay>=1){ pvVadeli+=a.tutar/Math.pow(1+aylikGetiri,a.ay); } }
    el.vadeliNPV.textContent=tl(pvVadeli);

      // KarÅŸÄ±laÅŸtÄ±rma
    const farkNPV = pvVadeli - netPesin; // >0: vadeli daha pahalÄ± â†’ peÅŸin avantajlÄ±

    if (farkNPV > 0) {
      // ğŸŸ© PeÅŸin daha avantajlÄ±
      el.aciklama.innerHTML =
        `ParanÄ± vadeli mevduatta deÄŸerlendirebileceÄŸini dÃ¼ÅŸÃ¼ndÃ¼ÄŸÃ¼mÃ¼zde, ` +
        `peÅŸin Ã¶demek bu iÅŸlemde daha avantajlÄ± gÃ¶rÃ¼nÃ¼yor. ` +
        `Taksitle alÄ±rsan bugÃ¼nkÃ¼ deÄŸere gÃ¶re ` +
        `<span class="negative"><b>${fmt0.format(Math.round(farkNPV))} TL</b></span> daha fazla Ã¶demiÅŸ oluyorsun.`;

      el.tercih.textContent = 'Tercih: PEÅÄ°N';
      el.tercih.className = 'prefer green';
      document.getElementById('boxKars').className = 'result-box green-box';

      // Ã–ZET KUTUSU (PeÅŸin avantajlÄ±)
      const val  = document.getElementById('summaryValue');
      const desc = document.getElementById('summaryDesc');

      val.textContent  = 'PeÅŸin daha avantajlÄ±';
      val.className    = 'summary-value summary-green';
      desc.textContent = `Vadeli seÃ§enek bugÃ¼nkÃ¼ deÄŸerle ${fmt0.format(Math.round(farkNPV))} TL daha pahalÄ±.`;

    } else if (farkNPV < 0) {
      // ğŸŸª Vadeli daha avantajlÄ±
      const avantaj = Math.round(-farkNPV);

      el.aciklama.innerHTML =
        `ParanÄ± vadeli mevduatta tutup taksitlerini Ã¶dediÄŸin senaryoda, ` +
        `vadeli Ã¶deme bu iÅŸlemde ` +
        `<span class="positive"><b>${fmt0.format(avantaj)} TL</b></span> avantaj saÄŸlÄ±yor.`;

      el.tercih.textContent = 'Tercih: VADELÄ°';
      el.tercih.className   = 'prefer purple';
      document.getElementById('boxKars').className = 'result-box purple-box';

      // Ã–ZET KUTUSU (Vadeli avantajlÄ±)
      const val  = document.getElementById('summaryValue');
      const desc = document.getElementById('summaryDesc');

      val.textContent  = 'Vadeli daha avantajlÄ±';
      val.className    = 'summary-value summary-purple';
      desc.textContent = `Vadeli almak bugÃ¼nkÃ¼ deÄŸerle yaklaÅŸÄ±k ${fmt0.format(avantaj)} TL avantajlÄ±.`;

    } else {
      // âšª EÅŸit / neredeyse eÅŸit durumda
      el.aciklama.innerHTML =
        `Mevduat getirisi hesaba katÄ±ldÄ±ÄŸÄ±nda, peÅŸin ve taksit seÃ§enekleri ` +
        `bugÃ¼nkÃ¼ deÄŸer aÃ§Ä±sÄ±ndan neredeyse aynÄ± seviyede kalÄ±yor.`;

      el.tercih.textContent = 'Tercih: EÅÄ°T';
      el.tercih.className   = 'prefer neutral';
      document.getElementById('boxKars').className = 'result-box neutral-box';

      // Ã–ZET KUTUSU (EÅŸit)
      const val  = document.getElementById('summaryValue');
      const desc = document.getElementById('summaryDesc');

      val.textContent  = 'Fark Yok';
      val.className    = 'summary-value summary-gray';
      desc.textContent = 'PeÅŸin ve vadeli bugÃ¼nkÃ¼ deÄŸer aÃ§Ä±sÄ±ndan eÅŸit gÃ¶rÃ¼nÃ¼yor.';
    }
    // Sadece karÅŸÄ±laÅŸtÄ±rma ve Ã¶zet kutusu parÄ±ldasÄ±n
    ['boxKars','summaryBox'].forEach(id => {
      const elFlash = document.getElementById(id);
      if (!elFlash) return;

      elFlash.classList.remove('result-flash');
      void elFlash.offsetWidth; // animasyon resetleme hilesi
      elFlash.classList.add('result-flash');
    });

}

  /* ========= HÄ±zlÄ± Hesaplama (3 kutu) ========= */
  const qPesin   = document.getElementById('q-pesinFiyat');
  const qTaksitS = document.getElementById('q-taksitSayi');
  const qAylik   = document.getElementById('q-aylikTaksit');
  const qBtn     = document.getElementById('quickCalcBtn');

  // BaÅŸlangÄ±Ã§ta deÄŸerleri ana formdan Ã§ek (virgÃ¼llÃ¼ gÃ¶ster)
  if (qPesin && el.pesinFiyat) {
    const basePesin = getMoney('pesinFiyat');
    qPesin.value = basePesin ? fmt2.format(basePesin) : '';
  }
  if (qTaksitS && el.taksitSayi) {
    qTaksitS.value = el.taksitSayi.value || '';
  }
  if (qAylik && el.aylikTaksit) {
    const baseAylik = getMoney('aylikTaksit');
    qAylik.value = baseAylik ? fmt2.format(baseAylik) : '';
  }

  // Yazarken: sadece ana formu gÃ¼ncelle, quick input'a dokunma
  if (qPesin) {
    qPesin.addEventListener('input', () => {
      const v = parseMoney(qPesin.value);
      el.pesinFiyat.value = v ? fmt2.format(v) : '';
      displayMoneyInput(el.pesinFiyat);
      hesapla();
    });
    // Kutudan Ã§Ä±kÄ±nca virgÃ¼llÃ¼ forma geÃ§ir
    qPesin.addEventListener('blur', () => {
      const v = parseMoney(qPesin.value);
      qPesin.value = v ? fmt2.format(v) : '';
    });
  }

  if (qTaksitS) {
    qTaksitS.addEventListener('input', () => {
      el.taksitSayi.value = qTaksitS.value || '';
      hesapla();
    });
  }

  if (qAylik) {
    qAylik.addEventListener('input', () => {
      const v = parseMoney(qAylik.value);
      el.aylikTaksit.value = v ? fmt2.format(v) : '';
      displayMoneyInput(el.aylikTaksit);
      hesapla();
    });
    qAylik.addEventListener('blur', () => {
      const v = parseMoney(qAylik.value);
      qAylik.value = v ? fmt2.format(v) : '';
    });
  }

  if (qBtn) {
  qBtn.addEventListener('click', () => {

    // BoÅŸ bÄ±rakÄ±lmÄ±ÅŸsa defaultlarÄ± ata (direkt deÄŸer veriyoruz)
    if (!qPesin.value)   { qPesin.value   = '100000'; }
    if (!qTaksitS.value) { qTaksitS.value = '12';     }
    if (!qAylik.value)   { qAylik.value   = '9500';   }

    // Quick input â†’ ana form senkronu
    // (input event'i kullanmÄ±yoruz)
    const vPesin = parseMoney(qPesin.value);
    el.pesinFiyat.value = vPesin ? fmt2.format(vPesin) : '';

    const vAylik = parseMoney(qAylik.value);
    el.aylikTaksit.value = vAylik ? fmt2.format(vAylik) : '';

    el.taksitSayi.value = qTaksitS.value;

    // Ana formu formatla ve hesapla
    displayMoneyInput(el.pesinFiyat);
    displayMoneyInput(el.aylikTaksit);
    hesapla();

    // SonuÃ§lara kaydÄ±r
    document.getElementById('sag-kart')?.scrollIntoView({
      behavior:'smooth', 
      block:'start'
    });
  });
}

  /* ========= Ä°lk render ========= */
  document.querySelectorAll('.money').forEach(displayMoneyInput);
  renderAra();
  hesapla();

  /* ========= Banka KampanyalarÄ± (Ã¶rnek veri) ========= */
  (function(){
    const FMT0 = fmt0, FMT2 = fmt2;
    const campaigns = [
      { id:'c1', type:'card', bank:'Banka A', title:'Market/Online %5 Ä°ade',
        benefitType:'cashback', benefitValue:5, capTL:500, categories:['market','online'],
        validUntil:'2025-12-31', link:'#', sponsored:true },
      { id:'c2', type:'card', bank:'Banka B', title:'Mobilya/ElektroniÄŸe 6 Taksit',
        benefitType:'installment', benefitValue:6, categories:['mobilya','elektronik'],
        validUntil:'2025-11-30', link:'#', sponsored:false },
      { id:'c3', type:'card', bank:'Banka C', title:'2.000 TL harcamaya 200 TL Bonus',
        benefitType:'bonus', benefitValue:200, minSpend:2000,
        validUntil:'2025-10-31', link:'#', sponsored:true },
      { id:'d1', type:'deposit', bank:'Banka D', title:'HoÅŸ Geldin Mevduat',
        monthlyRate:3.2, lockDays:32, minAmount:10000, validUntil:'2025-11-15', link:'#', sponsored:true },
      { id:'d2', type:'deposit', bank:'Banka E', title:'e-Mevduat Promosyonu',
        monthlyRate:4.0, lockDays:60, minAmount:5000, validUntil:'2025-10-20', link:'#', sponsored:false }
    ];
    const daysLeft = (iso)=>{ const d=new Date(iso+'T23:59:59'); const ms=d-new Date(); return Math.ceil(ms/86400000); };
    const annualFromMonthly = (m)=> (Math.pow(1+m/100,12)-1)*100;

    function renderCardCamp(c){
      const left = daysLeft(c.validUntil);
      const warn = left<=7 ? `<span class="badge warn">Son ${left} gÃ¼n</span>` : '';
      const cap = c.capTL ? `<span class="cap">Ãœst limit: ${FMT0.format(c.capTL)} â‚º</span>` : '';
      const cat = c.categories?.length ? c.categories.map(x=>`<span class="badge">${x}</span>`).join('') : '';
      let mainBadge='';
      if(c.benefitType==='cashback') mainBadge = `<span class="badge green">%${c.benefitValue} iade</span>`;
      else if(c.benefitType==='bonus') mainBadge = `<span class="badge green">${FMT0.format(c.benefitValue)} TL bonus</span>`;
      else if(c.benefitType==='installment') mainBadge = `<span class="badge purple">${FMT0.format(c.benefitValue)} taksit</span>`;
      return `
        <div class="camp">
          <div class="meta">
            <div class="bank">${c.bank} ${c.sponsored?`<span class="sponsored">sponsorlu</span>`:''}</div>
            <div class="ttl">${c.title}</div>
            <div class="badges">${mainBadge}${cap?` ${cap}`:''}${cat?` ${cat}`:''}${warn?` ${warn}`:''}</div>
            <div class="fine">BitiÅŸ: ${c.validUntil}</div>
          </div>
          <div class="cta">
            <a class="primary" href="${c.link}" target="_blank" rel="nofollow sponsored">Detay / BaÅŸvur</a>
          </div>
        </div>`;
    }

    function renderDepositCamp(d){
      const left = daysLeft(d.validUntil);
      const y = annualFromMonthly(d.monthlyRate);
      const warn = left<=7 ? `<span class="badge warn">Son ${left} gÃ¼n</span>` : '';
      return `
        <div class="camp">
          <div class="meta">
            <div class="bank">${d.bank} ${d.sponsored?`<span class="sponsored">sponsorlu</span>`:''}</div>
            <div class="ttl">${d.title}</div>
            <div class="badges">
              <span class="badge purple">Ay: %${FMT2.format(d.monthlyRate)}</span>
              <span class="badge green">YÄ±l (bileÅŸik): %${FMT2.format(y)}</span>
              <span class="badge">Vade: ${d.lockDays} gÃ¼n</span>
              ${d.minAmount?`<span class="badge">Min: ${FMT0.format(d.minAmount)} â‚º</span>`:''}
              ${warn}
            </div>
            <div class="fine">BitiÅŸ: ${d.validUntil}</div>
          </div>
          <div class="cta">
            <a class="primary" href="${d.link}" target="_blank" rel="nofollow sponsored">Detay / BaÅŸvur</a>
          </div>
        </div>`;
    }

    function sortFor(type, arr){
      return arr.slice().sort((a,b)=>{
        const leftA = daysLeft(a.validUntil), leftB = daysLeft(b.validUntil);
        const dl = leftA - leftB;
        if(dl!==0) return dl;
        const score = (x)=>{
          if(type==='card'){
            if(x.benefitType==='cashback') return x.benefitValue||0;
            if(x.benefitType==='bonus') return (x.benefitValue||0)/20;
            if(x.benefitType==='installment') return (x.benefitValue||0)*0.7;
            return 0;
          } else {
            return annualFromMonthly(x.monthlyRate||0);
          }
        };
        return score(b)-score(a);
      });
    }

    function render(tab){
      const host = document.getElementById('campsList');
      if(!host) return;
      const list = campaigns.filter(x=>x.type===tab);
      const sorted = sortFor(tab, list);
      host.innerHTML = sorted.map(x => tab==='card' ? renderCardCamp(x) : renderDepositCamp(x)).join('');
    }

    const tabs = document.querySelectorAll('#camps .tab');
    tabs.forEach(t=>{
      t.addEventListener('click',()=>{
        tabs.forEach(z=>z.classList.remove('active'));
        t.classList.add('active');
        render(t.dataset.tab);
      });
    });

    render('card'); // varsayÄ±lan gÃ¶rÃ¼nÃ¼m
  })();
 /* ========= DÃ–VÄ°Z & ALTIN ========= */
  async function loadRates() {
    try {
      // DÃ¶viz (TRY bazlÄ±)
      const fxRes = await fetch("https://open.er-api.com/v6/latest/TRY");
      const fx = await fxRes.json();

      const usdTry = 1 / fx.rates.USD;
      const eurTry = 1 / fx.rates.EUR;
      const gbpTry = 1 / fx.rates.GBP;

      document.getElementById("usd").textContent = usdTry.toFixed(2);
      document.getElementById("eur").textContent = eurTry.toFixed(2);
      document.getElementById("gbp").textContent = gbpTry.toFixed(2);
    } catch (e) {
      console.error("DÃ¶viz verisi alÄ±namadÄ±:", e);
    }

    try {
      // Gram AltÄ±n â€“ kendi proxy endpoint'imiz
      const goldRes = await fetch("/api/gram-altin");
      if (goldRes.ok) {
        const goldData = await goldRes.json();
        const gaEl = document.getElementById("ga");
        if (gaEl && goldData.satis) {
          gaEl.textContent = Number(goldData.satis).toFixed(2);
        }
      }
    } catch (e) {
      console.error("AltÄ±n verisi alÄ±namadÄ±:", e);
    }
  }

  loadRates();
  setInterval(loadRates, 300000);


}); // DOMContentLoaded
</script>

<!-- âœ… Yeni footer -->
<footer>
  <div class="footer-inner">
    <div>Â© 2025 <strong>taksitmi.com</strong> â€” PeÅŸin mi, vadeli mi? KararÄ±nÄ± bilinÃ§li ver.</div>
    <div><a href="mailto:taksitmi@gmail.com">taksitmi@gmail.com</a></div>
  </div>
</footer>

  <script src="navbar.js"></script>

</body>
</html>
